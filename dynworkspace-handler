#!/bin/bash

while getopts ":m" opt; do
  case $opt in
    m)
      move=true
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done

#actwsp=$(i3-msg -t get_outputs | jq -r '.[] | .current_workspace' | grep -v null)
actwsp=$(i3-msg -t get_workspaces | jq -r '.[] | .name,.focused' | grep -in . | grep $(($(i3-msg -t get_workspaces | jq -r '.[] | .name,.focused' | grep -in true  | cut -f1 -d\:)-1))\:.* | cut -f2 -d\:)
workspace=$(i3-msg -t get_workspaces | jq -r '.[] | .name' | grep -v "^$actwsp$" | dmenu)

if [ "$move" == "true" ]
then
	i3-msg move container to workspace "${workspace}"
else
	i3-msg workspace "${workspace}"
fi

